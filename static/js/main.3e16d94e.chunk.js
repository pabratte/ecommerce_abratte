(this["webpackJsonpreactjs-ecommerce"]=this["webpackJsonpreactjs-ecommerce"]||[]).push([[0],{106:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),i=c(23),s=c.n(i),r=(c(77),c(78),c(8)),j=c(47),l=c(14),o=c(1);var d=function(e){var t=e.name,c=e.categoryId;return Object(o.jsx)(j.a.Item,{children:Object(o.jsx)(l.c,{to:"/category/".concat(c),children:t})})},b=c(20),m=c(21),u=c(72),O=n.a.createContext();function h(e){var t=e.children,c=Object(a.useState)([]),n=Object(r.a)(c,2),i=n[0],s=n[1],j=function(e){var t=!1;return i.forEach((function(c){c.item.id===e&&(t=!0)})),t},l=function(e,t){i.forEach((function(c,a){c.item.id===e&&(i[a].quantity=t)})),s(i)};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(O.Provider,{value:{items:i,addItem:function(e,t){if(j(e.id))l(e.id,t);else{var c=[].concat(Object(u.a)(i),[{item:e,quantity:t}]);s(c)}},removeItem:function(e){var t=i.filter((function(t){return t.item.id!==e}));s(t)},getItem:function(e){var t=void 0;return i.forEach((function(c){c.item.id===e&&(t=c)})),t},clear:function(){s([])},isEmpty:function(){return 0===i.length},getTotalPrice:function(){return i.reduce((function(e,t){return e+parseInt(t.item.price)*parseInt(t.quantity)}),0)}},children:t})})}var x=function(){var e=Object(a.useContext)(O);return Object(o.jsxs)(l.b,{to:"/cart",className:"cart-widget",children:[Object(o.jsx)(b.a,{icon:m.c}),e.items.length>0&&Object(o.jsx)("div",{className:"cart-widget-item-count",children:e.items.length})]})},f=c(71),p=c(57),v=c(69),g=c(51),N=c.n(g);var y=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){N.a.get("https://api.mercadolibre.com/sites/MLA/categories").then((function(e){return e.data})).then((function(e){n(e)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f.a,{expand:"lg",children:Object(o.jsxs)(p.a,{children:[Object(o.jsx)(v.a,{children:Object(o.jsx)(l.c,{to:"/",children:"ReactBuy"})}),Object(o.jsx)(x,{})]})}),Object(o.jsx)(p.a,{children:Object(o.jsx)(j.a,{className:"mt-3",children:c.map((function(e){return Object(o.jsx)(d,{categoryId:e.id,name:e.name},e.id)}))})})]})},C=c(9),I=c(110),k=c(109),S=c(108),E=c(114);var F=function(e){var t=e.item;return Object(o.jsx)(S.a,{className:"col-3",children:Object(o.jsxs)(E.a,{className:"m-2",children:[Object(o.jsx)(E.a.Img,{variant:"top",src:t.thumbnail}),Object(o.jsxs)(E.a.Body,{children:[Object(o.jsx)(E.a.Title,{className:"item-card-title",children:t.title}),Object(o.jsx)(E.a.Text,{children:t.description}),Object(o.jsx)(l.b,{to:"/item/".concat(t.id),className:"btn btn-primary",children:"Add to cart"})]})]})})};var A=function(e){var t=e.items;return Object(o.jsx)(k.a,{children:t.map((function(e){return Object(o.jsx)(F,{item:e},e.id)}))})};var T=function(){var e=n.a.useState(void 0),t=Object(r.a)(e,2),c=t[0],i=t[1],s=n.a.useState(""),j=Object(r.a)(s,2),l=j[0],d=j[1],u=n.a.useState(!0),O=Object(r.a)(u,2),h=O[0],x=O[1],f=Object(C.h)().categoryId;return Object(a.useEffect)((function(){x(!0),function(e){return N.a.get("https://api.mercadolibre.com/sites/MLA/search?category=".concat(e)).then((function(e){return e.data.results}))}(f).then((function(e){x(!1),i(e)})).catch((function(e){x(!1),i(null),d(e)}))}),[f]),Object(o.jsxs)(p.a,{children:[h&&Object(o.jsxs)(I.a,{variant:"info",className:"mt-3",children:[Object(o.jsx)(b.a,{className:"fa-spin",icon:m.d}),Object(o.jsx)("span",{className:"m-2",children:"Loading..."})]}),!h&&!c&&Object(o.jsx)(I.a,{variant:"danger",className:"mt-3",children:Object(o.jsxs)("span",{className:"m-2",children:["An error ocurred: ",l]})}),!h&&c&&Object(o.jsx)(A,{items:c})]})},q=c(112),w=c(111);var L=function(e){var t=e.onAdd,c=e.initial,n=void 0===c?1:c,i=e.stock,s=void 0===i?10:i,j=Object(a.useState)(parseInt(n,10)),l=Object(r.a)(j,2),d=l[0],u=l[1];return Object(o.jsxs)(p.a,{children:[Object(o.jsx)(k.a,{className:"mb-2",children:Object(o.jsxs)(w.a,{className:"m-0 p-0",size:"sm",children:[Object(o.jsx)(q.a,{onClick:function(){return u(d-1)},variant:"outline-primary",disabled:d<=1,className:"col-2",children:Object(o.jsx)(b.a,{icon:m.a})})," ",Object(o.jsx)(q.a,{variant:"outline-primary",className:"col-10 item-count-number",disabled:!0,children:d})," ",Object(o.jsx)(q.a,{onClick:function(){return u(d+1)},variant:"outline-primary",disabled:d>=s,className:"col-2",children:Object(o.jsx)(b.a,{icon:m.b})})," "]})}),Object(o.jsxs)(k.a,{children:[Object(o.jsx)(q.a,{onClick:function(){return t(d)},disabled:d>s,variant:"primary",size:"lg",children:"Add to cart"})," "]})]})};var B=function(e){var t=e.item,c=n.a.useState(1),i=Object(r.a)(c,2),s=i[0],j=i[1],l=n.a.useState(!0),d=Object(r.a)(l,2),b=d[0],m=d[1],u=Object(C.g)(),h=Object(a.useContext)(O);return Object(o.jsxs)(k.a,{className:"item-detail",children:[Object(o.jsx)(S.a,{className:"col-md-5",children:Object(o.jsx)("img",{className:"img-responsive item-detail-img",src:t.thumbnail,alt:t.title})}),Object(o.jsxs)(S.a,{className:"col-md-6",children:[Object(o.jsx)("h2",{className:"item-detail-title",children:t.title}),Object(o.jsx)("p",{className:"item-detail-description",children:t.description}),Object(o.jsxs)("h3",{className:"item-detail-price",children:["$",t.price]}),b?Object(o.jsx)(L,{initial:s,onAdd:function(e){j(e),m(!1)}}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(k.a,{className:"mb-2",children:[Object(o.jsx)(S.a,{children:Object(o.jsx)(q.a,{className:"block-button",variant:"primary",size:"lg",onClick:function(){h.addItem(t,s),u.push("/cart")},children:"Go to cart"})}),Object(o.jsx)(S.a,{children:Object(o.jsx)(q.a,{className:"block-button",variant:"outline-primary",size:"lg",onClick:function(){m(!0)},children:"Cancel"})})]})})]})]})};var P=function(){var e=n.a.useState(void 0),t=Object(r.a)(e,2),c=t[0],i=t[1],s=n.a.useState(""),j=Object(r.a)(s,2),l=j[0],d=j[1],u=n.a.useState(!0),O=Object(r.a)(u,2),h=O[0],x=O[1],f=Object(C.h)().itemId;return Object(a.useEffect)((function(){x(!0),function(e){return N.a.get("https://api.mercadolibre.com/items?ids=".concat(e)).then((function(e){return e.data[0].body}))}(f).then((function(e){x(!1),i(e)})).catch((function(e){i(null),d(e)}))}),[f]),Object(o.jsxs)(p.a,{children:[h&&Object(o.jsxs)(I.a,{variant:"info",className:"mt-3",children:[Object(o.jsx)(b.a,{className:"fa-spin",icon:m.d}),Object(o.jsx)("span",{className:"m-2",children:"Loading..."})]}),!h&&!c&&Object(o.jsx)(I.a,{variant:"danger",className:"mt-3",children:Object(o.jsxs)("span",{className:"m-2",children:["An error ocurred: ",l]})}),!h&&c&&Object(o.jsx)(B,{item:c})]})},R=c(113);function z(e){var t=e.item,c=e.quantity,a=e.onRemove;return Object(o.jsxs)(k.a,{className:"cart-table-row",children:[Object(o.jsx)(S.a,{className:"col-md-1",children:Object(o.jsx)("img",{alt:t.description,className:"img-responsive cart-list-img",src:"".concat(t.thumbnail)})}),Object(o.jsx)(S.a,{className:"col-md-1 cart-col-quantity",children:c}),Object(o.jsx)(S.a,{className:"col-md-7",children:t.title}),Object(o.jsx)(S.a,{className:"col-md-2 cart-col-price",children:"$".concat(t.price*c)}),Object(o.jsx)(S.a,{className:"col-md-1 cart-col-price",children:Object(o.jsx)(q.a,{variant:"outline-danger",onClick:function(){a(t.id)},children:Object(o.jsx)(b.a,{icon:m.e})})})]})}var M=function(){var e=Object(a.useContext)(O),t=Object(C.g)(),c=Object(a.useState)(!1),n=Object(r.a)(c,2),i=n[0],s=n[1],j=Object(a.useState)(null),l=Object(r.a)(j,2),d=l[0],b=l[1],m=function(){s(!1),b(null)},u=function(e){s(!0),b(e)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(p.a,{className:"mt-3",children:[e.isEmpty()&&Object(o.jsx)(I.a,{variant:"secondary",className:"cart-empty",children:"The cart is empty"}),!e.isEmpty()&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(k.a,{children:Object(o.jsx)(S.a,{className:"cart-table-title",children:"Your items"})}),e.items.map((function(e){return Object(o.jsx)(z,{item:e.item,quantity:e.quantity,onRemove:u},e.item.id)})),Object(o.jsx)(k.a,{children:Object(o.jsx)(S.a,{className:"cart-table-total",children:"Total: $".concat(e.getTotalPrice())})}),Object(o.jsx)(k.a,{className:"mt-3",children:Object(o.jsx)(S.a,{className:"p-0",children:Object(o.jsx)(q.a,{variant:"primary",onClick:function(){t.push("/checkout")},className:"btn-lg",children:"Checkout"})})})]})]}),Object(o.jsxs)(R.a,{show:i,onHide:m,children:[Object(o.jsx)(R.a.Header,{closeButton:!0,children:Object(o.jsx)(R.a.Title,{children:"Remove Item"})}),Object(o.jsx)(R.a.Body,{children:"Do you really wish to remove this item from the cart?"}),Object(o.jsxs)(R.a.Footer,{children:[Object(o.jsx)(q.a,{variant:"secondary",onClick:m,children:"Cancel"}),Object(o.jsx)(q.a,{variant:"danger",onClick:function(){e.removeItem(d),m()},children:"Remove"})]})]})]})};function $(){var e=Object(a.useContext)(O),t=Object(C.g)();return Object(o.jsx)(p.a,{children:Object(o.jsx)(k.a,{className:"mt-3",children:Object(o.jsx)(S.a,{xs:12,children:Object(o.jsx)(q.a,{variant:"primary",onClick:function(){e.clear(),t.push("/")},children:"Pay & finish"})})})})}function D(){return Object(o.jsxs)(C.d,{children:[Object(o.jsx)(C.b,{path:"/category/:categoryId",component:T}),Object(o.jsx)(C.b,{path:"/item/:itemId",component:P}),Object(o.jsx)(C.b,{path:"/cart",component:M}),Object(o.jsx)(C.b,{path:"/checkout",component:$}),Object(o.jsx)(C.b,{path:"/",children:Object(o.jsx)(C.a,{to:"/category/MLA5725"})})]})}var H=function(){return Object(o.jsx)(h,{children:Object(o.jsxs)(l.a,{children:[Object(o.jsx)(y,{}),Object(o.jsx)(D,{})]})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,115)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))};s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(H,{})}),document.getElementById("root")),J()},77:function(e,t,c){},78:function(e,t,c){}},[[106,1,2]]]);
//# sourceMappingURL=main.3e16d94e.chunk.js.map