(this["webpackJsonpreactjs-ecommerce"]=this["webpackJsonpreactjs-ecommerce"]||[]).push([[0],{102:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),i=c(35),r=c.n(i),s=(c(89),c(90),c(16)),j=c(65),o=c(23),l=c(2);var u=function(e){var t=e.name,c=e.categoryId;return Object(l.jsx)(j.a.Item,{children:Object(l.jsx)(o.c,{to:"/category/".concat(c),children:t})})},d=c(30),m=c(31),b=c(44),O=n.a.createContext();function h(e){var t=e.children,c=Object(a.useState)([]),n=Object(s.a)(c,2),i=n[0],r=n[1],j=function(e){var t=!1;return i.forEach((function(c){c.item.id===e&&(t=!0)})),t},o=function(e,t){r(i.map((function(c){return c.item.id===e&&(c.quantity=t),c})))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(O.Provider,{value:{items:i,addItem:function(e,t){if(j(e.id))o(e.id,t);else{var c=[].concat(Object(b.a)(i),[{item:e,quantity:t}]);r(c)}},removeItem:function(e){var t=i.filter((function(t){return t.item.id!==e}));r(t)},getItem:function(e){var t=void 0;return i.forEach((function(c){c.item.id===e&&(t=c)})),t},clear:function(){r([])},isEmpty:function(){return 0===i.length},getTotalPrice:function(){return i.reduce((function(e,t){return e+parseInt(t.item.price)*parseInt(t.quantity)}),0)},getTotalItems:function(){var e=0;return i.forEach((function(t,c){e+=t.quantity})),e}},children:t})})}var x=function(){var e=Object(a.useContext)(O);return Object(l.jsxs)(o.b,{to:"/cart",className:"cart-widget",children:[Object(l.jsx)(d.a,{icon:m.c}),e.getTotalItems()>0&&Object(l.jsx)("div",{className:"cart-widget-item-count",children:e.getTotalItems()})]})},p=c(83),f=c(75),v=c(81),g=c(1),y=c.n(g),N=c(5),I=c(80),k=c(37);Object(I.a)({apiKey:"AIzaSyD8iPxkwWtqXiGQ7jSB6XATWvdslnU5cZ0",authDomain:"mimitos-ecommerce.firebaseapp.com",projectId:"mimitos-ecommerce",storageBucket:"mimitos-ecommerce.appspot.com",messagingSenderId:"862628270568",appId:"1:862628270568:web:290876bce8eb3a9009d45d",measurementId:"G-YSXBVLSZZ9"});var C=Object(k.e)();function S(){return(S=Object(N.a)(y.a.mark((function e(){var t,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(Object(k.a)(C,"categories"));case 2:return t=e.sent,c=[],t.forEach((function(e){c.push({id:e.id,name:e.data().name})})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(N.a)(y.a.mark((function e(t){var c,a,n,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(k.a)(C,"items"),a=Object(k.f)(c,Object(k.g)("category","==",parseInt(t))),e.next=4,Object(k.d)(a);case 4:return n=e.sent,i=[],n.forEach((function(e){var t=e.data();i.push({id:e.id,title:t.title,description:t.description,price:t.price,thumbnail:t.thumbnail})})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(N.a)(y.a.mark((function e(t){var c,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(k.b)(C,"items",t),e.next=3,Object(k.c)(c);case 3:if(a=e.sent,console.log("Here"),!a.exists()){e.next=11;break}return n=a.data(),console.log(n),e.abrupt("return",{id:t,title:n.title,description:n.description,price:n.price,thumbnail:n.thumbnail});case 11:console.log("No such document!");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),c=t[0],n=t[1],i=Object(a.useContext)(O);return Object(a.useEffect)((function(){(function(){return S.apply(this,arguments)})().then((function(e){n(e)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p.a,{expand:"lg",children:Object(l.jsxs)(f.a,{children:[Object(l.jsx)(v.a,{children:Object(l.jsx)(o.c,{to:"/",children:"ReactBuy"})}),i.getTotalItems()>0&&Object(l.jsx)(x,{})]})}),Object(l.jsx)(f.a,{children:Object(l.jsx)(j.a,{className:"mt-3",children:c.map((function(e){return Object(l.jsx)(u,{categoryId:e.id,name:e.name},e.id)}))})})]})},F=c(18),q=c(106),B=c(105),A=c(104),P=c(110);var z=function(e){var t=e.item;return Object(l.jsx)(A.a,{className:"col-3",children:Object(l.jsxs)(P.a,{className:"m-2",children:[Object(l.jsx)(P.a.Img,{variant:"top",src:t.thumbnail}),Object(l.jsxs)(P.a.Body,{children:[Object(l.jsx)(P.a.Title,{className:"item-card-title",children:t.title}),Object(l.jsx)(P.a.Text,{children:t.description}),Object(l.jsx)(o.b,{to:"/item/".concat(t.id),className:"btn btn-primary",children:"Add to cart"})]})]})})};var L=function(e){var t=e.items;return Object(l.jsx)(B.a,{children:t.map((function(e){return Object(l.jsx)(z,{item:e},e.id)}))})};var R=function(){var e=n.a.useState(void 0),t=Object(s.a)(e,2),c=t[0],i=t[1],r=n.a.useState(""),j=Object(s.a)(r,2),o=j[0],u=j[1],b=n.a.useState(!0),O=Object(s.a)(b,2),h=O[0],x=O[1],p=Object(F.h)().categoryId;return Object(a.useEffect)((function(){x(!0),function(e){return w.apply(this,arguments)}(p).then((function(e){x(!1),i(e)})).catch((function(e){x(!1),i(null),u(e)}))}),[p]),Object(l.jsxs)(f.a,{children:[h&&Object(l.jsxs)(q.a,{variant:"info",className:"mt-3",children:[Object(l.jsx)(d.a,{className:"fa-spin",icon:m.d}),Object(l.jsx)("span",{className:"m-2",children:"Loading..."})]}),!h&&!c&&Object(l.jsx)(q.a,{variant:"danger",className:"mt-3",children:Object(l.jsxs)("span",{className:"m-2",children:["An error ocurred: ",o]})}),!h&&c&&Object(l.jsx)(L,{items:c})]})},D=c(108),G=c(107);var H=function(e){var t=e.onAdd,c=e.initial,n=void 0===c?1:c,i=e.stock,r=void 0===i?10:i,j=Object(a.useState)(parseInt(n,10)),o=Object(s.a)(j,2),u=o[0],b=o[1];return Object(l.jsxs)(f.a,{children:[Object(l.jsx)(B.a,{className:"mb-2",children:Object(l.jsxs)(G.a,{className:"m-0 p-0",size:"sm",children:[Object(l.jsx)(D.a,{onClick:function(){return b(u-1)},variant:"outline-primary",disabled:u<=1,className:"col-2",children:Object(l.jsx)(d.a,{icon:m.a})})," ",Object(l.jsx)(D.a,{variant:"outline-primary",className:"col-10 item-count-number",disabled:!0,children:u})," ",Object(l.jsx)(D.a,{onClick:function(){return b(u+1)},variant:"outline-primary",disabled:u>=r,className:"col-2",children:Object(l.jsx)(d.a,{icon:m.b})})," "]})}),Object(l.jsxs)(B.a,{children:[Object(l.jsx)(D.a,{onClick:function(){return t(u)},disabled:u>r,variant:"primary",size:"lg",children:"Add to cart"})," "]})]})};var X=function(e){var t=e.item,c=n.a.useState(1),i=Object(s.a)(c,2),r=i[0],j=i[1],o=n.a.useState(!0),u=Object(s.a)(o,2),d=u[0],m=u[1],b=Object(F.g)(),h=Object(a.useContext)(O);return Object(l.jsxs)(B.a,{className:"item-detail",children:[Object(l.jsx)(A.a,{className:"col-md-5",children:Object(l.jsx)("img",{className:"img-responsive item-detail-img",src:t.thumbnail,alt:t.title})}),Object(l.jsxs)(A.a,{className:"col-md-6",children:[Object(l.jsx)("h2",{className:"item-detail-title",children:t.title}),Object(l.jsx)("p",{className:"item-detail-description",children:t.description}),Object(l.jsxs)("h3",{className:"item-detail-price",children:["$",t.price]}),d?Object(l.jsx)(H,{initial:r,onAdd:function(e){j(e),m(!1)}}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(B.a,{className:"mb-2",children:[Object(l.jsx)(A.a,{children:Object(l.jsx)(D.a,{className:"block-button",variant:"primary",size:"lg",onClick:function(){h.addItem(t,r),b.push("/cart")},children:"Go to cart"})}),Object(l.jsx)(A.a,{children:Object(l.jsx)(D.a,{className:"block-button",variant:"outline-primary",size:"lg",onClick:function(){m(!0)},children:"Cancel"})})]})})]})]})};var Z=function(){var e=n.a.useState(void 0),t=Object(s.a)(e,2),c=t[0],i=t[1],r=n.a.useState(""),j=Object(s.a)(r,2),o=j[0],u=j[1],b=n.a.useState(!0),O=Object(s.a)(b,2),h=O[0],x=O[1],p=Object(F.h)().itemId;return Object(a.useEffect)((function(){x(!0),function(e){return T.apply(this,arguments)}(p).then((function(e){x(!1),i(e)})).catch((function(e){i(null),u(e)}))}),[p]),Object(l.jsxs)(f.a,{children:[h&&Object(l.jsxs)(q.a,{variant:"info",className:"mt-3",children:[Object(l.jsx)(d.a,{className:"fa-spin",icon:m.d}),Object(l.jsx)("span",{className:"m-2",children:"Loading..."})]}),!h&&!c&&Object(l.jsx)(q.a,{variant:"danger",className:"mt-3",children:Object(l.jsxs)("span",{className:"m-2",children:["An error ocurred: ",o]})}),!h&&c&&Object(l.jsx)(X,{item:c})]})},$=c(109);function J(e){var t=e.item,c=e.quantity,a=e.onRemove;return Object(l.jsxs)(B.a,{className:"cart-table-row",children:[Object(l.jsx)(A.a,{className:"col-md-1",children:Object(l.jsx)("img",{alt:t.description,className:"img-responsive cart-list-img",src:"".concat(t.thumbnail)})}),Object(l.jsx)(A.a,{className:"col-md-1 cart-col-quantity",children:c}),Object(l.jsx)(A.a,{className:"col-md-7",children:t.title}),Object(l.jsx)(A.a,{className:"col-md-2 cart-col-price",children:"$".concat(t.price*c)}),Object(l.jsx)(A.a,{className:"col-md-1 cart-col-price",children:Object(l.jsx)(D.a,{variant:"outline-danger",onClick:function(){a(t.id)},children:Object(l.jsx)(d.a,{icon:m.e})})})]})}var W=function(){var e=Object(a.useContext)(O),t=Object(F.g)(),c=Object(a.useState)(!1),n=Object(s.a)(c,2),i=n[0],r=n[1],j=Object(a.useState)(null),o=Object(s.a)(j,2),u=o[0],d=o[1],m=function(){r(!1),d(null)},b=function(e){r(!0),d(e)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(f.a,{className:"mt-3",children:[e.isEmpty()&&Object(l.jsxs)(q.a,{variant:"secondary",className:"cart-empty",children:[Object(l.jsx)("div",{children:"The cart is empty"}),Object(l.jsx)(D.a,{variant:"primary",onClick:function(){t.push("/")},children:"Go shopping!"})]}),!e.isEmpty()&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B.a,{children:Object(l.jsx)(A.a,{className:"cart-table-title",children:"Your items"})}),e.items.map((function(e){return Object(l.jsx)(J,{item:e.item,quantity:e.quantity,onRemove:b},e.item.id)})),Object(l.jsx)(B.a,{children:Object(l.jsx)(A.a,{className:"cart-table-total",children:"Total: $".concat(e.getTotalPrice())})}),Object(l.jsx)(B.a,{className:"mt-3",children:Object(l.jsx)(A.a,{className:"p-0",children:Object(l.jsx)(D.a,{variant:"primary",onClick:function(){t.push("/checkout")},className:"btn-lg",children:"Checkout"})})})]})]}),Object(l.jsxs)($.a,{show:i,onHide:m,children:[Object(l.jsx)($.a.Header,{closeButton:!0,children:Object(l.jsx)($.a.Title,{children:"Remove Item"})}),Object(l.jsx)($.a.Body,{children:"Do you really wish to remove this item from the cart?"}),Object(l.jsxs)($.a.Footer,{children:[Object(l.jsx)(D.a,{variant:"secondary",onClick:m,children:"Cancel"}),Object(l.jsx)(D.a,{variant:"danger",onClick:function(){e.removeItem(u),m()},children:"Remove"})]})]})]})};function Y(){var e=Object(a.useContext)(O),t=Object(F.g)();return Object(l.jsx)(f.a,{children:Object(l.jsx)(B.a,{className:"mt-3",children:Object(l.jsx)(A.a,{xs:12,children:Object(l.jsx)(D.a,{variant:"primary",onClick:function(){e.clear(),t.push("/")},children:"Pay & finish"})})})})}function K(){return Object(l.jsxs)(F.d,{children:[Object(l.jsx)(F.b,{path:"/category/:categoryId",component:R}),Object(l.jsx)(F.b,{path:"/item/:itemId",component:Z}),Object(l.jsx)(F.b,{path:"/cart",component:W}),Object(l.jsx)(F.b,{path:"/checkout",component:Y}),Object(l.jsx)(F.b,{path:"/",children:Object(l.jsx)(F.a,{to:"/category/1"})})]})}var M=function(){return Object(l.jsx)(h,{children:Object(l.jsxs)(o.a,{children:[Object(l.jsx)(E,{}),Object(l.jsx)(K,{})]})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,111)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),i(e),r(e)}))};r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root")),Q()},89:function(e,t,c){},90:function(e,t,c){}},[[102,1,2]]]);
//# sourceMappingURL=main.a9835856.chunk.js.map